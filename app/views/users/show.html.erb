<div class="justify-content-lg-center px-9">
  <h1><%= @user.screen_name %></h1>
  <div class="py-5 px-3 max-w-sm bg-white rounded-xl shadow-lg flex items-center space-x-4 mb-5">
    <div class="shrink-0">
      <%= image_tag @user.avatar, width: "50px" %>
    </div>
    <div class="text-zinc-600">
      <strong>GitHub:</strong> <%= github_link(@user.github) if @user.github.present? %>
      <p>
        <% if @user.orcid %>
          <strong>Orcid:</strong> <%= @user.orcid %>
        <% end %>
      </p>
    </div>
  </div>

  <div class="grid sm:grid-cols-2 gap-y-5 gap-x-5">
    <div>
      <div class="block mb-5">
        <span class="font-semibold">Name:</span>
        <%= @user.complete_name %>
      </div>

      <div class="block mb-5">
        <span class="font-semibold">Citation name:</span>
        <%= @user.citation_name %>
      </div>

      <div class="block mb-5">
        <span class="font-semibold">Email:</span>
        <%= @user.email %>
      </div>

      <div class="block mb-5">
        <span class="font-semibold">Affiliation:</span>
        <div class="w-full"><%= @user.affiliation %></div>
      </div>

      <div class="block mb-5">
        <span class="font-semibold">URL:</span>
        <div class="w-full"><%= link_to(@user.url, @user.url, target: "_blank") if @user.url.present? %></div>
      </div>

      <div class="block mb-5">
        <span class="font-semibold">Twitter:</span>
        <div class="w-full"><%= link_to(@user.twitter, "http://twitter.com/" + @user.twitter, target: "_blank") if @user.twitter.present? %></div>
      </div>

      <div class="block mb-5">
        <span class="font-semibold">Description:</span>
        <div class="w-full"><%= @user.description %></div>
      </div>
    </div>

    <div>
      <% unless @user.areas.empty? %>
      <div class="block mb-5">
        <span class="font-semibold">Area(s) of expertise:</span>
        <% @user.areas.each  do |area| %>
          <div class="w-full"><%= area.name %></div>
        <% end %>
      </div>
      <% end %>

      <div class="block mb-5">
        <span class="font-semibold">Domains:</span>
        <div class="w-full"><%= @user.domains %></div>
      </div>

      <div class="block mb-5">
        <span class="font-semibold">Programming languages:</span>
        <div class="w-full"><%= @user.languages.map(&:name).join(", ") %></div>
      </div>
    </div>

  </div>
</div>

<div class="divider"></div>

<div class="justify-content-lg-center py-4 px-9">
  <h2>Feedback</h2>

  <% if @feedbacks.empty? %>
    There's no feedback for this reviewer yet.
  <% else %>
  <% if @feedbacks.total_pages > 1 %>
    <div class="float-right"><%= page_entries_info @feedbacks, entry_name: "feedback entry" %></div>
  <% end %>
  <span id="add-feedback-link" class="cursor-pointer underline text-indigo-600" onclick="this.style.display='none';document.getElementById('feedback-form').style.display='block';">Add feedback</span>
  <table id="feedbacks" class="listing divide-transparent">

    <tbody>
    <% @feedbacks.each do |feedback| %>
      <tr id="feedback-<%= feedback.id %>">
        <td class="w-xs text-center <%= bg_by_rating feedback.rating %>"><%= feedback.rating_icon %></td>
        <td class="min-w-[60%]"><%= feedback.comment %></td>
        <td class="max-w-fit text-center" title="<%= time_ago_in_words(feedback.created_at)%> ago"><%= feedback.created_at.strftime("%d-%m-%Y") %></td>
        <td class="max-w-fit text-center">
          by: <%= github_link(feedback.editor.github) %>
          <%= " | ".html_safe + link_to("Reference", feedback.link, target: "_blank", title: "Go to review") if feedback.link.present? %>
          <%= " | ".html_safe + link_to("Delete", feedback_path(feedback), data: { turbo_method: :delete, turbo_confirm: "Are you sure you want to delete this feedback?" }) if feedback.editor == current_editor %>
        </td>
      </tr>
    <% end %>
    </tbody>
  </table>
  <div class="pagination"><%= paginate @feedbacks %></div>
  <% end %>

</div>